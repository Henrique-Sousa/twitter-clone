<!DOCTYPE html>
<html>
<body>
	<main>
		<h1>Tweets</h1>
		<script>
			fetch('http://127.0.0.1:3000/tweets', { mode: 'cors' })
				.then(res => res.json())
				.then(data => {
					main = document.querySelector('main');
					for (let tweet of data) {

						const div = document.createElement('div');

						const text = document.createElement('p');
						text.innerText = tweet.text;
						div.append(text);

						fetch(`http://127.0.0.1:3000/users/${tweet.author}`, { mode: 'cors' })
							.then(res => res.json())
							.then(data => 
								{
									username = data.nickname;
									const author = document.createElement('p');
									author.innerText = username; 
									div.append(author);
								})
							.catch(err => console.log(err));
						main.append(div);
					}
				})
				.catch(err => console.log(err));
		</script>
	</main>
</body>
</html>

